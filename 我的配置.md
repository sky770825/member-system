# 🔧 我的系統配置

## 📅 更新日期
2025年10月12日

---

## 🔑 Google Apps Script

### 部署 URL
```
https://script.google.com/macros/s/AKfycbwYbhHNlwix-1FQzB63PVKprfiV0Q3CxOLNFuGUWXXnPNPsiN3L5bvkr6id0XyITi_F/exec
```

### 測試 API
在瀏覽器中打開以下網址進行測試：

**檢查會員（GET）:**
```
https://script.google.com/macros/s/AKfycbwYbhHNlwix-1FQzB63PVKprfiV0Q3CxOLNFuGUWXXnPNPsiN3L5bvkr6id0XyITi_F/exec?action=check&lineUserId=TEST123
```

**預期結果：** `{"registered":false}`

---

## 📊 Google Sheets

### Sheet ID
```
1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw
```

### 直接訪問
[打開 Google Sheets](https://docs.google.com/spreadsheets/d/1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw/edit)

---

## 💚 LINE LIFF

### LIFF ID 清單

| 頁面 | LIFF ID | LIFF URL |
|------|---------|----------|
| 註冊頁面 | `2008231108-rZQKp3mn` | https://liff.line.me/2008231108-rZQKp3mn |
| 會員中心 | `2008231108-2PDbO5qk` | https://liff.line.me/2008231108-2PDbO5qk |
| 轉點頁面 | `2008231108-8dwdPJ26` | https://liff.line.me/2008231108-8dwdPJ26 |
| 編輯資料 | `2008231108-dmPJ4BrZ` | https://liff.line.me/2008231108-dmPJ4BrZ |
| 點數記錄 | `2008231108-vDmD4yRa` | https://liff.line.me/2008231108-vDmD4yRa |

---

## 🌐 前端部署

### GitHub Repository
- **用戶名**: sky770825
- **Repository**: （請填寫您的 repo 名稱）
- **GitHub Pages URL**: https://sky770825.github.io/（請填寫完整路徑）

### 部署狀態
- [ ] 已上傳到 GitHub
- [ ] 已啟用 GitHub Pages
- [ ] 已更新 LIFF Endpoint URLs

---

## ✅ 檢查清單

### Google Apps Script 設定
- [x] 已複製 `google-apps-script.js` 代碼
- [x] 已填入正確的 `SHEET_ID`
- [x] 已部署為 Web App
- [x] 部署設定為「所有人」可存取
- [x] 已添加 CORS 支援（`doOptions` 函數）

### HTML 檔案設定
- [x] `register.html` - 已更新 Apps Script URL
- [x] `profile.html` - 已更新 Apps Script URL
- [x] `transfer.html` - 已更新 Apps Script URL
- [x] 所有檔案的 LIFF ID 已更新

### 測試完成
- [ ] 測試註冊功能
- [ ] 測試會員中心
- [ ] 測試轉點功能
- [ ] 檢查 Google Sheets 資料是否正確

---

## 🧪 快速測試指令

### 使用 cURL 測試 POST 請求

**Windows PowerShell:**
```powershell
$body = @{
    lineUserId = "TEST123"
    name = "測試用戶"
    phone = "0912-345-678"
    email = "test@example.com"
} | ConvertTo-Json

Invoke-RestMethod -Uri "https://script.google.com/macros/s/AKfycbwYbhHNlwix-1FQzB63PVKprfiV0Q3CxOLNFuGUWXXnPNPsiN3L5bvkr6id0XyITi_F/exec?action=register" -Method POST -Body $body -ContentType "application/json"
```

**Git Bash / Linux / Mac:**
```bash
curl -X POST "https://script.google.com/macros/s/AKfycbwYbhHNlwix-1FQzB63PVKprfiV0Q3CxOLNFuGUWXXnPNPsiN3L5bvkr6id0XyITi_F/exec?action=register" \
  -H "Content-Type: application/json" \
  -d '{"lineUserId":"TEST123","name":"測試用戶","phone":"0912-345-678","email":"test@example.com"}'
```

---

## 📝 重要提醒

### 每次修改代碼後必須：
1. 在 Apps Script 編輯器中保存
2. 點選「部署」→「管理部署作業」
3. 點選「編輯」（鉛筆圖示）
4. 版本選擇「**新版本**」（重要！）
5. 點選「部署」

### CORS 問題排查
如果遇到 CORS 錯誤：
1. ✅ 確認已添加 `doOptions()` 函數
2. ✅ 確認已使用 `createCorsResponse()` 函數
3. ✅ 確認已創建「新版本」並重新部署
4. ✅ 等待 5 分鐘讓部署生效
5. ✅ 清除瀏覽器快取

詳細解決方案請參考：[CORS問題解決指南.md](./CORS問題解決指南.md)

---

## 🎯 下一步行動

1. **部署前端到 GitHub Pages**
   - 將所有檔案上傳到 GitHub
   - 啟用 GitHub Pages
   - 更新 LIFF Endpoint URLs

2. **完整測試**
   - 在 LINE 中測試所有功能
   - 確認資料正確寫入 Google Sheets

3. **正式使用**
   - 清除測試資料
   - 開始推廣給真實用戶

---

## 📞 支援資源

- [部署指南](./部署指南.md) - 完整部署步驟
- [CORS問題解決指南](./CORS問題解決指南.md) - CORS 錯誤排查
- [立即使用指南](./立即使用指南.md) - 快速開始使用

---

**最後更新**: 2025年10月12日

