# å¿«é€Ÿé…ç½®æŒ‡å—

## ğŸ“ éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ç¸½è¦½

å®Œæˆéƒ¨ç½²éœ€è¦ä¿®æ”¹ä»¥ä¸‹æª”æ¡ˆä¸­çš„è¨­å®šï¼š

### âœ… æª¢æŸ¥æ¸…å–®

- [ ] Google Apps Script ä¸­çš„ SHEET_ID
- [ ] register.html ä¸­çš„ LIFF ID å’Œ API URL
- [ ] profile.html ä¸­çš„ LIFF ID å’Œ API URL
- [ ] transfer.html ä¸­çš„ LIFF ID å’Œ API URL
- [ ] LINE Developers Console ä¸­çš„ LIFF Endpoint URL

---

## ğŸ”§ è©³ç´°ä¿®æ”¹æ­¥é©Ÿ

### 1. Google Apps Script è¨­å®š

**æª”æ¡ˆ:** `google-apps-script.js`

**ç¬¬ 10 è¡Œ:**
```javascript
const SHEET_ID = 'YOUR_GOOGLE_SHEET_ID'; // â† æ›¿æ›é€™è£¡
```

**å¦‚ä½•å–å¾— Sheet ID:**
1. é–‹å•Ÿæ‚¨çš„ Google Sheets
2. æŸ¥çœ‹ç€è¦½å™¨ç¶²å€åˆ—
3. è¤‡è£½ `/d/` å’Œ `/edit` ä¹‹é–“çš„æ–‡å­—

**ç¯„ä¾‹:**
```
ç¶²å€: https://docs.google.com/spreadsheets/d/1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw/edit
Sheet ID: 1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw
```

---

### 2. register.html è¨­å®š

**éœ€è¦ä¿®æ”¹çš„åœ°æ–¹:**

#### (1) LIFF ID - ç¬¬ 63 è¡Œ
```javascript
await liff.init({ liffId: "1234567890-AbCdEfGh" }); // â† æ›¿æ›ç‚ºæ‚¨çš„è¨»å†Šé é¢ LIFF ID
```

#### (2) æª¢æŸ¥æœƒå“¡ API - ç¬¬ 77 è¡Œ
```javascript
const checkRes = await fetch(`https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=check&lineUserId=${lineUserId}`);
```

#### (3) è·³è½‰ç¶²å€ - ç¬¬ 83-86 è¡Œ
```javascript
liff.openWindow({ 
  url: "https://YOUR_USERNAME.github.io/YOUR_REPO/profile.html", 
  external: false 
});
```

#### (4) è¨»å†Š API - ç¬¬ 113 è¡Œ
```javascript
const res = await fetch('https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=register', {
```

#### (5) è¨»å†ŠæˆåŠŸè·³è½‰ - ç¬¬ 126-129 è¡Œ
```javascript
liff.openWindow({ 
  url: "https://YOUR_USERNAME.github.io/YOUR_REPO/profile.html", 
  external: false 
});
```

**å®Œæ•´æ›¿æ›ç¯„ä¾‹:**
```javascript
// å‡è¨­æ‚¨çš„è¨­å®šå¦‚ä¸‹ï¼š
// LIFF ID: 2000000001-AbCd1234
// Apps Script: https://script.google.com/macros/s/AKfycbz.../exec
// GitHub Pages: https://myname.github.io/member-system/

// ç¬¬ 63 è¡Œ
await liff.init({ liffId: "2000000001-AbCd1234" });

// ç¬¬ 77 è¡Œ
const checkRes = await fetch(`https://script.google.com/macros/s/AKfycbz.../exec?action=check&lineUserId=${lineUserId}`);

// ç¬¬ 83-86 è¡Œ
liff.openWindow({ 
  url: "https://myname.github.io/member-system/profile.html", 
  external: false 
});

// ç¬¬ 113 è¡Œ
const res = await fetch('https://script.google.com/macros/s/AKfycbz.../exec?action=register', {
```

---

### 3. profile.html è¨­å®š

**éœ€è¦ä¿®æ”¹çš„åœ°æ–¹:**

#### (1) LIFF ID - ç¬¬ 21 è¡Œ
```javascript
await liff.init({ liffId: "2000000002-EfGh5678" }); // â† æœƒå“¡ä¸­å¿ƒçš„ LIFF ID
```

#### (2) å–å¾—æœƒå“¡è³‡æ–™ API - ç¬¬ 33 è¡Œ
```javascript
const res = await fetch("https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=profile&lineUserId=" + lineUserId);
```

#### (3) è½‰é»æŒ‰éˆ•è·³è½‰ - ç¬¬ 92-95 è¡Œ
```javascript
function goTransfer() {
  liff.openWindow({ 
    url: "https://YOUR_USERNAME.github.io/YOUR_REPO/transfer.html", 
    external: false 
  });
}
```

#### (4) é»æ•¸è¨˜éŒ„æŒ‰éˆ• - ç¬¬ 98-102 è¡Œ
```javascript
function goHistory() {
  liff.openWindow({ 
    url: "https://YOUR_USERNAME.github.io/YOUR_REPO/history.html", 
    external: false 
  });
}
```

#### (5) ç·¨è¼¯è³‡æ–™æŒ‰éˆ• - ç¬¬ 105-109 è¡Œ
```javascript
function editProfile() {
  liff.openWindow({ 
    url: "https://YOUR_USERNAME.github.io/YOUR_REPO/edit.html", 
    external: false 
  });
}
```

---

### 4. transfer.html è¨­å®š

**éœ€è¦ä¿®æ”¹çš„åœ°æ–¹:**

#### (1) LIFF ID - ç¬¬ 85 è¡Œ
```javascript
await liff.init({ liffId: "2000000003-IjKl9012" }); // â† è½‰é»é é¢çš„ LIFF ID
```

#### (2) å–å¾—æœƒå“¡é»æ•¸ API - ç¬¬ 96 è¡Œ
```javascript
const res = await fetch(`https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=profile&lineUserId=${lineUserId}`);
```

#### (3) æª¢æŸ¥æ”¶æ¬¾äºº API - ç¬¬ 120 è¡Œ
```javascript
const res = await fetch(`https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=check-user&phone=${phone}`);
```

#### (4) è½‰é» API - ç¬¬ 213 è¡Œ
```javascript
const res = await fetch('https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?action=transfer', {
```

---

### 5. LINE Developers Console è¨­å®š

å‰å¾€ [LINE Developers Console](https://developers.line.biz/console/)

#### æ›´æ–° LIFF Endpoint URLs

æ‰¾åˆ°æ‚¨çš„ 3 å€‹ LIFF æ‡‰ç”¨ï¼Œåˆ†åˆ¥è¨­å®šï¼š

1. **æœƒå“¡è¨»å†Š LIFF**
   - Endpoint URL: `https://YOUR_USERNAME.github.io/YOUR_REPO/register.html`

2. **æœƒå“¡ä¸­å¿ƒ LIFF**
   - Endpoint URL: `https://YOUR_USERNAME.github.io/YOUR_REPO/profile.html`

3. **é»æ•¸è½‰ç§» LIFF**
   - Endpoint URL: `https://YOUR_USERNAME.github.io/YOUR_REPO/transfer.html`

---

## ğŸš€ ä½¿ç”¨æœå°‹å–ä»£åŠŸèƒ½

ç‚ºäº†æ–¹ä¾¿ä¿®æ”¹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç·¨è¼¯å™¨çš„ã€Œæœå°‹å–ä»£ã€åŠŸèƒ½ï¼š

### æ­¥é©Ÿ 1: æº–å‚™æ‚¨çš„è³‡è¨Š

```
æ‚¨çš„ Google Sheet ID: 1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw
æ‚¨çš„ Apps Script URL: https://script.google.com/macros/s/AKfycbz.../exec
æ‚¨çš„ GitHub Pages: https://myname.github.io/member-system

LIFF ID (è¨»å†Š): 2000000001-AbCd1234
LIFF ID (æœƒå“¡ä¸­å¿ƒ): 2000000002-EfGh5678
LIFF ID (è½‰é»): 2000000003-IjKl9012
```

### æ­¥é©Ÿ 2: æ‰¹æ¬¡å–ä»£

åœ¨ VSCodeã€Notepad++ æˆ–å…¶ä»–ç·¨è¼¯å™¨ä¸­ï¼š

#### google-apps-script.js
```
æœå°‹: YOUR_GOOGLE_SHEET_ID
å–ä»£ç‚º: 1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw
```

#### register.html
```
æœå°‹: YOUR_LIFF_ID
å–ä»£ç‚º: 2000000001-AbCd1234

æœå°‹: https://YOUR_N8N_URL/webhook
å–ä»£ç‚º: https://script.google.com/macros/s/AKfycbz.../exec?action

æœå°‹: https://YOUR_DOMAIN
å–ä»£ç‚º: https://myname.github.io/member-system
```

#### profile.html
```
æœå°‹: YOUR_LIFF_ID
å–ä»£ç‚º: 2000000002-EfGh5678

æœå°‹: https://YOUR_N8N_URL/webhook
å–ä»£ç‚º: https://script.google.com/macros/s/AKfycbz.../exec?action

æœå°‹: https://YOUR_DOMAIN
å–ä»£ç‚º: https://myname.github.io/member-system
```

#### transfer.html
```
æœå°‹: YOUR_LIFF_ID
å–ä»£ç‚º: 2000000003-IjKl9012

æœå°‹: https://YOUR_N8N_URL/webhook
å–ä»£ç‚º: https://script.google.com/macros/s/AKfycbz.../exec?action
```

---

## ğŸ§ª æ¸¬è©¦æª¢æŸ¥æ¸…å–®

å®Œæˆè¨­å®šå¾Œï¼Œè«‹ä¾åºæ¸¬è©¦ï¼š

### âœ… 1. Google Apps Script æ¸¬è©¦

åœ¨ Apps Script ç·¨è¼¯å™¨ä¸­åŸ·è¡Œï¼š

```javascript
// æ¸¬è©¦ï¼šå»ºç«‹ç¯„ä¾‹è³‡æ–™
createSampleData();
Logger.log('æ¸¬è©¦è³‡æ–™å»ºç«‹å®Œæˆ');

// æ¸¬è©¦ï¼šå–å¾—çµ±è¨ˆè³‡æ–™
const stats = getStatistics();
Logger.log('çµ±è¨ˆè³‡æ–™:', stats);
```

### âœ… 2. API ç«¯é»æ¸¬è©¦

ä½¿ç”¨ç€è¦½å™¨æˆ– curl æ¸¬è©¦ï¼š

```bash
# æ¸¬è©¦æª¢æŸ¥æœƒå“¡
https://script.google.com/macros/s/YOUR_ID/exec?action=check&lineUserId=TEST001

# æ¸¬è©¦å–å¾—è³‡æ–™
https://script.google.com/macros/s/YOUR_ID/exec?action=profile&lineUserId=U001
```

### âœ… 3. LIFF é é¢æ¸¬è©¦

1. åœ¨ LINE èŠå¤©å®¤ä¸­è¼¸å…¥ LIFF URLï¼š
   ```
   https://liff.line.me/2000000001-AbCd1234
   ```

2. æª¢æŸ¥æ˜¯å¦æ­£ç¢ºé–‹å•Ÿè¨»å†Šé é¢

3. å˜—è©¦å®Œæ•´çš„è¨»å†Šæµç¨‹

### âœ… 4. å®Œæ•´æµç¨‹æ¸¬è©¦

- [ ] è¨»å†Šæ–°æœƒå“¡
- [ ] æª¢æŸ¥ Google Sheets æ˜¯å¦æ–°å¢è³‡æ–™
- [ ] ç¢ºèªè´ˆé€ 100 é»
- [ ] é–‹å•Ÿæœƒå“¡ä¸­å¿ƒæŸ¥çœ‹è³‡æ–™
- [ ] æ¸¬è©¦è½‰é»åŠŸèƒ½
- [ ] æª¢æŸ¥é»æ•¸æ˜¯å¦æ­£ç¢ºæ‰£é™¤å’Œå¢åŠ 

---

## ğŸ” å¸¸è¦‹éŒ¯èª¤æ’æŸ¥

### éŒ¯èª¤ 1: "ç³»çµ±éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦"

**å¯èƒ½åŸå› :**
- Apps Script URL ä¸æ­£ç¢º
- CORS å•é¡Œ
- Apps Script éƒ¨ç½²è¨­å®šéŒ¯èª¤

**è§£æ±ºæ–¹æ³•:**
1. æª¢æŸ¥ Apps Script éƒ¨ç½²è¨­å®š
2. ç¢ºèªã€Œå…·æœ‰æ‡‰ç”¨ç¨‹å¼å­˜å–æ¬Šçš„ä½¿ç”¨è€…ã€ç‚ºã€Œæ‰€æœ‰äººã€
3. é‡æ–°éƒ¨ç½² Apps Script

### éŒ¯èª¤ 2: "LIFF åˆå§‹åŒ–éŒ¯èª¤"

**å¯èƒ½åŸå› :**
- LIFF ID ä¸æ­£ç¢º
- Endpoint URL è¨­å®šéŒ¯èª¤

**è§£æ±ºæ–¹æ³•:**
1. æª¢æŸ¥ LIFF ID æ˜¯å¦æ­£ç¢º
2. ç¢ºèª Endpoint URL ä½¿ç”¨ HTTPS
3. æª¢æŸ¥ç¶²åŸŸæ˜¯å¦å·²éƒ¨ç½²

### éŒ¯èª¤ 3: "æ‰¾ä¸åˆ°æœƒå“¡è³‡æ–™"

**å¯èƒ½åŸå› :**
- Google Sheet ID ä¸æ­£ç¢º
- å·¥ä½œè¡¨åç¨±éŒ¯èª¤
- æ²’æœ‰æ­£ç¢ºçš„å­˜å–æ¬Šé™

**è§£æ±ºæ–¹æ³•:**
1. æª¢æŸ¥ SHEET_ID æ˜¯å¦æ­£ç¢º
2. ç¢ºèªå·¥ä½œè¡¨åç¨±ç‚º "Members" å’Œ "Transactions"
3. æª¢æŸ¥ Apps Script åŸ·è¡Œç´€éŒ„

### éŒ¯èª¤ 4: è·³è½‰å¤±æ•—

**å¯èƒ½åŸå› :**
- ç¶²å€æ ¼å¼ä¸æ­£ç¢º
- ä½¿ç”¨äº† `http://` è€Œé `https://`

**è§£æ±ºæ–¹æ³•:**
1. ç¢ºèªæ‰€æœ‰ç¶²å€ä½¿ç”¨ HTTPS
2. æª¢æŸ¥ `liff.openWindow()` åƒæ•¸

---

## ğŸ“ å–å¾—å”åŠ©

å¦‚æœé‡åˆ°å•é¡Œï¼š

1. **æª¢æŸ¥ç€è¦½å™¨ Console**
   - æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
   - æŸ¥çœ‹ Console ä¸­çš„éŒ¯èª¤è¨Šæ¯

2. **æª¢æŸ¥ Apps Script åŸ·è¡Œç´€éŒ„**
   - åœ¨ Apps Script ç·¨è¼¯å™¨
   - é»é¸ã€ŒåŸ·è¡Œã€â†’ã€ŒåŸ·è¡Œç´€éŒ„ã€

3. **æª¢æŸ¥ Google Sheets**
   - ç¢ºèªè³‡æ–™æ˜¯å¦æ­£ç¢ºå¯«å…¥
   - æª¢æŸ¥æ¬„ä½æ ¼å¼

---

**é…ç½®å®Œæˆå¾Œï¼Œæ‚¨å°±å¯ä»¥é–‹å§‹ä½¿ç”¨æœƒå“¡è¨»å†Šç³»çµ±äº†ï¼** ğŸ‰

