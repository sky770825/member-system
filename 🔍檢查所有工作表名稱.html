<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ” æª¢æŸ¥æ‰€æœ‰å·¥ä½œè¡¨åç¨±</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Microsoft JhengHei', sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  padding: 20px;
}
.container {
  max-width: 1000px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
}
h1 {
  color: #667eea;
  margin-bottom: 20px;
  font-size: 28px;
}
.alert {
  background: #FFF3CD;
  border: 3px solid #FFC107;
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
  font-size: 16px;
  line-height: 1.8;
}
.alert strong {
  color: #856404;
  font-size: 18px;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 12px;
  overflow: hidden;
}
thead {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}
th {
  padding: 16px;
  text-align: left;
  font-weight: 700;
  font-size: 16px;
}
td {
  padding: 14px 16px;
  border-bottom: 1px solid #e0e0e0;
  font-size: 15px;
}
tbody tr:hover {
  background: #f8f9fa;
}
.status {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 20px;
  font-weight: 700;
  font-size: 13px;
}
.status.required {
  background: #FFEBEE;
  color: #C62828;
}
.status.optional {
  background: #E8F5E9;
  color: #2E7D32;
}
.btn {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  margin: 10px 10px 10px 0;
  transition: all 0.3s;
}
.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
.btn-success {
  background: linear-gradient(135deg, #4CAF50, #388E3C);
}
.section {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
}
.section h3 {
  color: #667eea;
  margin-bottom: 15px;
}
pre {
  background: #2d2d2d;
  color: #f8f8f2;
  padding: 16px;
  border-radius: 8px;
  overflow-x: auto;
  font-size: 13px;
  line-height: 1.6;
}
.check-item {
  padding: 12px;
  margin: 8px 0;
  background: white;
  border-radius: 8px;
  border: 2px solid #e0e0e0;
  display: flex;
  align-items: center;
  gap: 12px;
}
.check-item.ok {
  border-color: #4CAF50;
  background: #E8F5E9;
}
.check-item.fail {
  border-color: #f44336;
  background: #FFEBEE;
}
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ” æª¢æŸ¥æ‰€æœ‰å·¥ä½œè¡¨åç¨±</h1>
  
  <div class="alert">
    <strong>âš ï¸ æ‚¨çš„å•é¡Œï¼š</strong><br>
    â€¢ å•†åŸå•†å“ä¸€ç›´è½‰åœˆè¼‰å…¥<br>
    â€¢ æé ˜è¨˜éŒ„æ²’æœ‰å…§å®¹<br><br>
    <strong>âŒ åŸå› ï¼šGoogle Sheets å·¥ä½œè¡¨åç¨±ä¸å°æˆ–æ²’æœ‰è³‡æ–™</strong><br><br>
    <strong>âœ… è§£æ±ºï¼šç¢ºèªä¸¦å»ºç«‹æ‰€æœ‰å¿…è¦çš„å·¥ä½œè¡¨</strong>
  </div>
  
  <button class="btn btn-success" onclick="openGoogleSheets()">ğŸ“Š é–‹å•Ÿ Google Sheets</button>
  <button class="btn" onclick="testAllAPIs()">ğŸ§ª æ¸¬è©¦æ‰€æœ‰ API</button>
  
  <div class="section">
    <h3>ğŸ“‹ æ‚¨çš„ç³»çµ±éœ€è¦çš„å·¥ä½œè¡¨ï¼ˆä¸­æ–‡åç¨±ï¼‰</h3>
    
    <table>
      <thead>
        <tr>
          <th>å·¥ä½œè¡¨åç¨±ï¼ˆä¸­æ–‡ï¼‰</th>
          <th>ç”¨é€”</th>
          <th>é‡è¦æ€§</th>
          <th>API Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>æœƒå“¡è³‡æ–™</strong></td>
          <td>å„²å­˜æœƒå“¡åŸºæœ¬è³‡æ–™</td>
          <td><span class="status required">å¿…è¦</span></td>
          <td>register, profile</td>
        </tr>
        <tr>
          <td><strong>äº¤æ˜“è¨˜éŒ„</strong></td>
          <td>é»æ•¸è½‰ç§»è¨˜éŒ„</td>
          <td><span class="status required">å¿…è¦</span></td>
          <td>transactions, transfer</td>
        </tr>
        <tr>
          <td><strong>æ¨è–¦é—œä¿‚</strong></td>
          <td>æ¨è–¦äººé—œä¿‚</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>referral-stats</td>
        </tr>
        <tr>
          <td><strong>è³¼è²·è¨˜éŒ„</strong></td>
          <td>ä¸€èˆ¬è³¼è²·è¨˜éŒ„</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>-</td>
        </tr>
        <tr style="background: #FFF9C4;">
          <td><strong>æé ˜è¨˜éŒ„</strong></td>
          <td>æé ˜ç”³è«‹è¨˜éŒ„ âš ï¸</td>
          <td><span class="status required">å¿…è¦</span></td>
          <td>withdrawals</td>
        </tr>
        <tr style="background: #FFF9C4;">
          <td><strong>å•†åŸå•†å“</strong></td>
          <td>å•†åŸå•†å“åˆ—è¡¨ âš ï¸</td>
          <td><span class="status required">å¿…è¦</span></td>
          <td>mall-products</td>
        </tr>
        <tr>
          <td><strong>å•†åŸè¨‚å–®</strong></td>
          <td>å•†åŸè³¼è²·è¨‚å–®</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>mall-orders</td>
        </tr>
        <tr>
          <td><strong>æœƒå“¡ç­‰ç´š</strong></td>
          <td>æœƒå“¡ç­‰ç´šè¨­å®š</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>-</td>
        </tr>
        <tr>
          <td><strong>æ´»å‹•è¨˜éŒ„</strong></td>
          <td>æœƒå“¡æ´»å‹•è¨˜éŒ„</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>-</td>
        </tr>
        <tr>
          <td><strong>ç³»çµ±è¨­å®š</strong></td>
          <td>ç³»çµ±åƒæ•¸è¨­å®š</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>-</td>
        </tr>
        <tr>
          <td><strong>æ¯æ—¥çµ±è¨ˆ</strong></td>
          <td>æ¯æ—¥æ•¸æ“šçµ±è¨ˆ</td>
          <td><span class="status optional">é¸ç”¨</span></td>
          <td>-</td>
        </tr>
      </tbody>
    </table>
    
    <p style="color: #666; margin-top: 15px; font-size: 14px;">
      âš ï¸ é»ƒè‰²æ¨™è¨˜çš„å·¥ä½œè¡¨æ˜¯æ‚¨ç›®å‰é‡åˆ°å•é¡Œçš„
    </p>
  </div>
  
  <div class="section">
    <h3>âœ… ç«‹å³æª¢æŸ¥æ­¥é©Ÿ</h3>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <h4 style="color: #667eea; margin-bottom: 12px;">æ­¥é©Ÿ 1ï¼šé–‹å•Ÿ Google Sheets</h4>
      <p>é»æ“Šä¸Šæ–¹ã€ŒğŸ“Š é–‹å•Ÿ Google Sheetsã€æŒ‰éˆ•</p>
      <p style="margin-top: 8px; font-size: 14px; color: #666;">
        æˆ–è¤‡è£½ç¶²å€ï¼š<br>
        <code style="background: #f0f0f0; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
          https://docs.google.com/spreadsheets/d/1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw/edit
        </code>
      </p>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <h4 style="color: #667eea; margin-bottom: 12px;">æ­¥é©Ÿ 2ï¼šæª¢æŸ¥åº•éƒ¨å·¥ä½œè¡¨æ¨™ç±¤</h4>
      <p>åœ¨ Google Sheets åº•éƒ¨ï¼Œæ‚¨æ‡‰è©²çœ‹åˆ°é€™äº›å·¥ä½œè¡¨æ¨™ç±¤ï¼š</p>
      <pre style="margin-top: 10px;">æœƒå“¡è³‡æ–™  |  äº¤æ˜“è¨˜éŒ„  |  æ¨è–¦é—œä¿‚  |  æé ˜è¨˜éŒ„  |  å•†åŸå•†å“  |  ...</pre>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <h4 style="color: #667eea; margin-bottom: 12px;">æ­¥é©Ÿ 3ï¼šç¢ºèªé‡é»å·¥ä½œè¡¨</h4>
      
      <div class="check-item">
        <span style="font-size: 24px;">ğŸ“‹</span>
        <div style="flex: 1;">
          <strong>å•†åŸå•†å“</strong> - å¿…é ˆå­˜åœ¨ä¸”æœ‰è³‡æ–™ï¼ˆæ¨™é¡Œ+å•†å“ï¼‰
        </div>
      </div>
      
      <div class="check-item">
        <span style="font-size: 24px;">ğŸ’°</span>
        <div style="flex: 1;">
          <strong>æé ˜è¨˜éŒ„</strong> - å¿…é ˆå­˜åœ¨ï¼ˆå¯ä»¥ç©ºçš„ï¼‰
        </div>
      </div>
      
      <div class="check-item">
        <span style="font-size: 24px;">ğŸ‘¥</span>
        <div style="flex: 1;">
          <strong>æœƒå“¡è³‡æ–™</strong> - å¿…é ˆå­˜åœ¨ï¼ˆæœ‰æ‚¨çš„æœƒå“¡è³‡æ–™ï¼‰
        </div>
      </div>
      
      <div class="check-item">
        <span style="font-size: 24px;">ğŸ’¸</span>
        <div style="flex: 1;">
          <strong>äº¤æ˜“è¨˜éŒ„</strong> - å¿…é ˆå­˜åœ¨ï¼ˆå¯ä»¥ç©ºçš„ï¼‰
        </div>
      </div>
    </div>
  </div>
  
  <div class="section">
    <h3>ğŸ› ï¸ å¦‚æœå·¥ä½œè¡¨ä¸å­˜åœ¨æˆ–åç¨±éŒ¯èª¤</h3>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <h4 style="color: #f44336; margin-bottom: 12px;">âŒ å¸¸è¦‹éŒ¯èª¤</h4>
      <ul style="line-height: 2;">
        <li>å·¥ä½œè¡¨åç¨±æ˜¯è‹±æ–‡ï¼ˆä¾‹å¦‚ï¼šProductsã€Withdrawalsï¼‰</li>
        <li>å·¥ä½œè¡¨åç¨±æœ‰éŒ¯å­—ï¼ˆä¾‹å¦‚ï¼šå•†åŸå•†å“è¡¨ã€æé ˜ç´€éŒ„ï¼‰</li>
        <li>å·¥ä½œè¡¨æ ¹æœ¬ä¸å­˜åœ¨</li>
      </ul>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <h4 style="color: #4CAF50; margin-bottom: 12px;">âœ… æ­£ç¢ºåšæ³•</h4>
      
      <p><strong>æ–°å¢å·¥ä½œè¡¨ï¼š</strong></p>
      <ol style="line-height: 2; margin: 10px 0;">
        <li>é»æ“Š Google Sheets åº•éƒ¨å·¦ä¸‹è§’çš„ã€Œ<strong>+</strong>ã€æŒ‰éˆ•</li>
        <li>æ–°å·¥ä½œè¡¨å‡ºç¾å¾Œï¼Œå³éµé»é¸è©²å·¥ä½œè¡¨</li>
        <li>é¸æ“‡ã€Œé‡æ–°å‘½åã€</li>
        <li>è¼¸å…¥æ­£ç¢ºçš„ä¸­æ–‡åç¨±ï¼ˆä¾‹å¦‚ï¼š<strong>å•†åŸå•†å“</strong>ï¼‰</li>
        <li>æŒ‰ Enter ç¢ºèª</li>
      </ol>
      
      <p style="margin-top: 15px;"><strong>é‡æ–°å‘½åç¾æœ‰å·¥ä½œè¡¨ï¼š</strong></p>
      <ol style="line-height: 2; margin: 10px 0;">
        <li>å³éµé»é¸è¦æ”¹åçš„å·¥ä½œè¡¨æ¨™ç±¤</li>
        <li>é¸æ“‡ã€Œé‡æ–°å‘½åã€</li>
        <li>æ”¹æˆæ­£ç¢ºçš„ä¸­æ–‡åç¨±</li>
        <li>æŒ‰ Enter ç¢ºèª</li>
      </ol>
    </div>
  </div>
  
  <div class="section">
    <h3>ğŸ“‹ å¿«é€Ÿæ–°å¢ã€Œå•†åŸå•†å“ã€è³‡æ–™</h3>
    
    <p style="margin-bottom: 15px;">ç¢ºèªæœ‰ã€Œå•†åŸå•†å“ã€å·¥ä½œè¡¨å¾Œï¼Œæ–°å¢ä»¥ä¸‹è³‡æ–™ï¼š</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
      <strong>ç¬¬ 1 è¡Œï¼ˆæ¬„ä½æ¨™é¡Œï¼‰ï¼š</strong>
      <textarea readonly onclick="this.select()" style="width: 100%; height: 60px; padding: 10px; font-family: monospace; font-size: 12px; margin-top: 8px; border: 2px solid #e0e0e0; border-radius: 8px;">productId	productName	description	imageUrl	points	originalPrice	stock	category	sellerId	sellerName	sellerPhone	sellerReferralCode	isActive	soldCount	tags	createdAt	updatedAt</textarea>
      <button class="btn" onclick="copyHeaders()" style="margin-top: 10px; padding: 10px 20px; font-size: 14px;">ğŸ“‹ è¤‡è£½æ¨™é¡Œ</button>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
      <strong>ç¬¬ 2 è¡Œï¼ˆæ‹æ–°èå•†å“ï¼‰ï¼š</strong>
      <textarea readonly onclick="this.select()" style="width: 100%; height: 60px; padding: 10px; font-family: monospace; font-size: 12px; margin-top: 8px; border: 2px solid #e0e0e0; border-radius: 8px;">X7Z5P3	æ‹æ–°è	ç²å¾—æ‹æ–°èè™›æ“¬å•†å“åºè™Ÿ	https://i.postimg.cc/3R5j7t6k/Pi-News-GIF2.gif	3600	3600	-1	virtual			USER001	TRUE	0	è™›æ“¬å•†å“,åºè™Ÿ	2025-10-18	2025-10-18</textarea>
      <button class="btn" onclick="copyProduct()" style="margin-top: 10px; padding: 10px 20px; font-size: 14px;">ğŸ“‹ è¤‡è£½å•†å“</button>
    </div>
  </div>
  
  <div id="testResult"></div>
</div>

<script>
const SHEET_URL = 'https://docs.google.com/spreadsheets/d/1EdLfJQzYroQ9WMqVEqcDuMpGwiTPj8gxLaMnGp3umDw/edit';
const API_URL = 'https://script.google.com/macros/s/AKfycbzMUwqroi_W_5m7rcjVs-U-o6tEo9W0327BeMmU38Rxinmycd5d1HyyF3BnugGvNF6r/exec';

function openGoogleSheets() {
  window.open(SHEET_URL, '_blank');
}

async function testAllAPIs() {
  const resultDiv = document.getElementById('testResult');
  resultDiv.innerHTML = '<div class="section"><h3>ğŸ§ª API æ¸¬è©¦çµæœ</h3><p>æ¸¬è©¦ä¸­...</p></div>';
  
  const tests = [
    { name: 'å•†åŸå•†å“', action: 'mall-products', key: 'products' },
    { name: 'æé ˜è¨˜éŒ„', action: 'withdrawals', key: 'withdrawals' },
    { name: 'äº¤æ˜“è¨˜éŒ„', action: 'transactions', key: 'transactions' }
  ];
  
  let html = '<div class="section"><h3>ğŸ§ª API æ¸¬è©¦çµæœ</h3>';
  
  for (const test of tests) {
    try {
      const url = `${API_URL}?action=${test.action}`;
      const res = await fetch(url);
      const data = await res.json();
      
      const items = data[test.key] || [];
      const count = items.length;
      
      if (data.success) {
        if (count > 0) {
          html += `<div class="check-item ok">
            <span style="font-size: 24px;">âœ…</span>
            <div style="flex: 1;">
              <strong>${test.name}</strong> - æ­£å¸¸ï¼ˆ${count} ç­†è³‡æ–™ï¼‰
            </div>
          </div>`;
        } else {
          html += `<div class="check-item fail">
            <span style="font-size: 24px;">âš ï¸</span>
            <div style="flex: 1;">
              <strong>${test.name}</strong> - å·¥ä½œè¡¨å­˜åœ¨ä½†ç„¡è³‡æ–™
            </div>
          </div>`;
        }
      } else {
        html += `<div class="check-item fail">
          <span style="font-size: 24px;">âŒ</span>
          <div style="flex: 1;">
            <strong>${test.name}</strong> - å¤±æ•—ï¼š${data.message || 'æœªçŸ¥éŒ¯èª¤'}
          </div>
        </div>`;
      }
    } catch (error) {
      html += `<div class="check-item fail">
        <span style="font-size: 24px;">âŒ</span>
        <div style="flex: 1;">
          <strong>${test.name}</strong> - è«‹æ±‚å¤±æ•—ï¼š${error.message}
        </div>
      </div>`;
    }
  }
  
  html += '</div>';
  resultDiv.innerHTML = html;
}

function copyHeaders() {
  const text = 'productId\tproductName\tdescription\timageUrl\tpoints\toriginalPrice\tstock\tcategory\tsellerId\tsellerName\tsellerPhone\tsellerReferralCode\tisActive\tsoldCount\ttags\tcreatedAt\tupdatedAt';
  navigator.clipboard.writeText(text).then(() => {
    alert('âœ… æ¬„ä½æ¨™é¡Œå·²è¤‡è£½ï¼\n\nè«‹åˆ° Google Sheetsã€Œå•†åŸå•†å“ã€å·¥ä½œè¡¨\né»é¸ A1 æ ¼ï¼ŒæŒ‰ Ctrl+V è²¼ä¸Š');
  });
}

function copyProduct() {
  const text = 'X7Z5P3\tæ‹æ–°è\tç²å¾—æ‹æ–°èè™›æ“¬å•†å“åºè™Ÿ\thttps://i.postimg.cc/3R5j7t6k/Pi-News-GIF2.gif\t3600\t3600\t-1\tvirtual\t\t\t\tUSER001\tTRUE\t0\tè™›æ“¬å•†å“,åºè™Ÿ\t2025-10-18\t2025-10-18';
  navigator.clipboard.writeText(text).then(() => {
    alert('âœ… å•†å“è³‡æ–™å·²è¤‡è£½ï¼\n\nè«‹åˆ° Google Sheetsã€Œå•†åŸå•†å“ã€å·¥ä½œè¡¨\né»é¸ A2 æ ¼ï¼ŒæŒ‰ Ctrl+V è²¼ä¸Š');
  });
}
</script>

</body>
</html>

